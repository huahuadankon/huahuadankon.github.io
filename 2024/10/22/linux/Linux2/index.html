

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="huanhuadan">
  <meta name="keywords" content="">
  
    <meta name="description" content="第七章 磁盘分区和挂载 1. 磁盘分区1.1 磁盘分区的基本概念在 Linux 中，物理硬盘可以被划分为多个逻辑分区。每个分区可以被格式化为不同的文件系统，以便存储和管理数据。分区的目的是为了更好地管理存储空间，提高数据的安全性和访问效率。 1.2 常用分区类型 主分区：最多可以有四个，适用于大多数需求。 扩展分区：用于在主分区中创建更多的逻辑分区，可以包含多个逻辑分区，解决主分区数量的限制。 逻">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux(二)">
<meta property="og:url" content="http://huahaudan.com/2024/10/22/linux/Linux2/index.html">
<meta property="og:site_name" content="huahuadan">
<meta property="og:description" content="第七章 磁盘分区和挂载 1. 磁盘分区1.1 磁盘分区的基本概念在 Linux 中，物理硬盘可以被划分为多个逻辑分区。每个分区可以被格式化为不同的文件系统，以便存储和管理数据。分区的目的是为了更好地管理存储空间，提高数据的安全性和访问效率。 1.2 常用分区类型 主分区：最多可以有四个，适用于大多数需求。 扩展分区：用于在主分区中创建更多的逻辑分区，可以包含多个逻辑分区，解决主分区数量的限制。 逻">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://huahaudan.com/assets/Linux/image-20241021215343855.png">
<meta property="og:image" content="http://huahaudan.com/assets/Linux/image-20241021215447248.png">
<meta property="og:image" content="http://huahaudan.com/assets/Linux/image-20241022083554565.png">
<meta property="og:image" content="http://huahaudan.com/assets/Linux/image-20241022083921077.png">
<meta property="og:image" content="http://huahaudan.com/assets/Linux/image-20241021215635033.png">
<meta property="og:image" content="http://huahaudan.com/assets/Linux/image-20241021220151695.png">
<meta property="og:image" content="http://huahaudan.com/assets/Linux/image-20241021221227087.png">
<meta property="article:published_time" content="2024-10-22T00:23:36.000Z">
<meta property="article:modified_time" content="2024-10-22T02:13:46.220Z">
<meta property="article:author" content="huanhuadan">
<meta property="article:tag" content="操作系统">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://huahaudan.com/assets/Linux/image-20241021215343855.png">
  
  
  
  <title>Linux(二) - huahuadan</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"huahaudan.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-books"></i>
                <span>文档</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="https://hexo.fluid-dev.com/" target="_self">
                    
                    <span>主题博客</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="https://hexo.fluid-dev.com/docs/guide/" target="_self">
                    
                    <span>配置指南</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="https://hexo.fluid-dev.com/docs/icon/" target="_self">
                    
                    <span>图标用法</span>
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Linux(二)"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-10-22 08:23" pubdate>
          2024年10月22日 早上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          11k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          91 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Linux(二)</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="第七章-磁盘分区和挂载"><a href="#第七章-磁盘分区和挂载" class="headerlink" title="第七章 磁盘分区和挂载"></a>第七章 磁盘分区和挂载</h2><p><img src="/../assets/Linux/image-20241021215343855.png" srcset="/img/loading.gif" lazyload alt="image-20241021215343855"></p>
<h3 id="1-磁盘分区"><a href="#1-磁盘分区" class="headerlink" title="1. 磁盘分区"></a>1. 磁盘分区</h3><h4 id="1-1-磁盘分区的基本概念"><a href="#1-1-磁盘分区的基本概念" class="headerlink" title="1.1 磁盘分区的基本概念"></a>1.1 磁盘分区的基本概念</h4><p>在 Linux 中，物理硬盘可以被划分为多个逻辑分区。每个分区可以被格式化为不同的文件系统，以便存储和管理数据。分区的目的是为了更好地管理存储空间，提高数据的安全性和访问效率。</p>
<h4 id="1-2-常用分区类型"><a href="#1-2-常用分区类型" class="headerlink" title="1.2 常用分区类型"></a>1.2 常用分区类型</h4><ul>
<li><strong>主分区</strong>：最多可以有四个，适用于大多数需求。</li>
<li><strong>扩展分区</strong>：用于在主分区中创建更多的逻辑分区，可以包含多个逻辑分区，解决主分区数量的限制。</li>
<li><strong>逻辑分区</strong>：存在于扩展分区中的分区，可以根据需要创建多个逻辑分区。</li>
</ul>
<h4 id="1-3-分区工具"><a href="#1-3-分区工具" class="headerlink" title="1.3 分区工具"></a>1.3 分区工具</h4><ul>
<li><strong>fdisk</strong>：用于 MBR（主引导记录）分区管理的命令行工具，适用于较旧的硬盘。</li>
<li><strong>gdisk</strong>：用于 GPT（GUID 分区表）分区管理的工具，适用于现代硬盘。</li>
<li><strong>parted</strong>：支持 MBR 和 GPT 的通用分区工具，具有图形界面和命令行界面。</li>
</ul>
<h3 id="2-挂载"><a href="#2-挂载" class="headerlink" title="2. 挂载"></a>2. 挂载</h3><h4 id="2-1-挂载的基本概念"><a href="#2-1-挂载的基本概念" class="headerlink" title="2.1 挂载的基本概念"></a>2.1 挂载的基本概念</h4><p>挂载是将文件系统与一个特定的目录（挂载点）关联的过程。通过挂载，用户可以访问磁盘分区中的文件和目录。挂载点是一个空目录，表示将要访问的分区的内容。</p>
<h3 id="3-常用指令"><a href="#3-常用指令" class="headerlink" title="3. 常用指令"></a>3. 常用指令</h3><h4 id="3-1-查看磁盘和分区信息"><a href="#3-1-查看磁盘和分区信息" class="headerlink" title="3.1 查看磁盘和分区信息"></a>3.1 查看磁盘和分区信息</h4><ul>
<li><p><strong>查看分区信息</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">lsblk<br></code></pre></td></tr></table></figure>

<p>这个命令会列出所有块设备，包括磁盘和分区，输出的格式包含设备名称、大小、类型（如分区、光盘、硬盘等）、挂载点等信息。</p>
<p><img src="/../assets/Linux/image-20241021215447248.png" srcset="/img/loading.gif" lazyload alt="image-20241021215447248"></p>
</li>
<li><p><strong>查看详细的磁盘分区信息</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> fdisk -l<br></code></pre></td></tr></table></figure>

<p>此命令将列出所有磁盘及其分区的详细信息，包括每个分区的大小、类型、文件系统等。</p>
</li>
<li><p><strong>查询系统整体磁盘使用情况</strong></p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">df-h</span><br></code></pre></td></tr></table></figure>

<p><img src="/../assets/Linux/image-20241022083554565.png" srcset="/img/loading.gif" lazyload alt="image-20241022083554565"></p>
</li>
<li><p><strong>查询指定目录的磁盘占用情况</strong></p>
</li>
</ul>
  <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs diff">du-h<br>查询指定目录的磁盘占用情况，默认为当前目录<br><span class="hljs-deletion">-s 指定目录占用大小汇总</span><br><span class="hljs-deletion">-h 带计量单位</span><br><span class="hljs-deletion">-a 含文件</span><br><span class="hljs-deletion">--max-depth=1 子目录深度</span><br><span class="hljs-deletion">-c 列出明细的同时，增加汇总值</span><br></code></pre></td></tr></table></figure>

<p>  <img src="/../assets/Linux/image-20241022083921077.png" srcset="/img/loading.gif" lazyload alt="image-20241022083921077"></p>
<h4 id="3-2-分区操作"><a href="#3-2-分区操作" class="headerlink" title="3.2 分区操作"></a>3.2 分区操作</h4><ul>
<li><p><strong>创建新的分区</strong><br>例如，使用 <code>fdisk</code> 对 <code>/dev/sdb</code> 创建分区：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> fdisk /dev/sdb<br></code></pre></td></tr></table></figure>

<ul>
<li>输入 <code>n</code> 创建新分区。</li>
<li>输入 <code>p</code> 创建主分区或 <code>e</code> 创建扩展分区。</li>
<li>输入分区编号（例如 1、2、3、4）。</li>
<li>设置起始扇区和结束扇区，直接回车可使用默认值。</li>
<li>输入 <code>w</code> 保存更改并退出。</li>
</ul>
</li>
<li><p><strong>删除分区</strong><br>在 <code>fdisk</code> 中，输入 <code>d</code> 删除指定分区。</p>
</li>
</ul>
<h4 id="3-3-格式化分区"><a href="#3-3-格式化分区" class="headerlink" title="3.3 格式化分区"></a>3.3 格式化分区</h4><p>一旦分区创建完成，需要格式化分区以创建文件系统。例如，将新创建的分区 <code>/dev/sdb1</code> 格式化为 ext4 文件系统：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> mkfs.ext4 /dev/sdb1<br></code></pre></td></tr></table></figure>

<p>这条命令会将 <code>/dev/sdb1</code> 分区格式化为 ext4 文件系统。</p>
<h3 id="4-挂载分区"><a href="#4-挂载分区" class="headerlink" title="4. 挂载分区"></a>4. 挂载分区</h3><h4 id="4-1-创建挂载点"><a href="#4-1-创建挂载点" class="headerlink" title="4.1 创建挂载点"></a>4.1 创建挂载点</h4><p>在挂载之前，需要创建一个挂载点，通常是一个空目录。例如，创建挂载点 <code>/mnt/mydisk</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mkdir</span> /mnt/mydisk<br></code></pre></td></tr></table></figure>

<h4 id="4-2-挂载分区"><a href="#4-2-挂载分区" class="headerlink" title="4.2 挂载分区"></a>4.2 挂载分区</h4><p>使用 <code>mount</code> 命令将分区挂载到指定的挂载点：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> mount /dev/sdb1 /mnt/mydisk<br></code></pre></td></tr></table></figure>

<p>这条命令将 <code>/dev/sdb1</code> 分区的文件系统挂载到 <code>/mnt/mydisk</code> 目录。</p>
<h4 id="4-3-查看已挂载的分区"><a href="#4-3-查看已挂载的分区" class="headerlink" title="4.3 查看已挂载的分区"></a>4.3 查看已挂载的分区</h4><p>使用 <code>df</code> 命令可以查看当前挂载的文件系统及其使用情况：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">df</span> -h<br></code></pre></td></tr></table></figure>

<p>输出将显示每个文件系统的大小、已用空间、可用空间和挂载点。</p>
<h4 id="4-4-卸载分区"><a href="#4-4-卸载分区" class="headerlink" title="4.4 卸载分区"></a>4.4 卸载分区</h4><p>如果需要卸载分区，使用 <code>umount</code> 命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> umount /mnt/mydisk<br></code></pre></td></tr></table></figure>

<p>请确保在卸载之前没有任何进程正在使用该挂载点。</p>
<h3 id="5-设置开机自动挂载"><a href="#5-设置开机自动挂载" class="headerlink" title="5. 设置开机自动挂载"></a>5. 设置开机自动挂载</h3><p>为了在系统启动时自动挂载分区，需要编辑 <code>/etc/fstab</code> 文件。</p>
<h4 id="5-1-获取分区-UUID"><a href="#5-1-获取分区-UUID" class="headerlink" title="5.1 获取分区 UUID"></a>5.1 获取分区 UUID</h4><p>可以使用 <code>blkid</code> 命令获取分区的 UUID：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> blkid /dev/sdb1<br></code></pre></td></tr></table></figure>

<p>输出示例：</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">/dev/sdb1: <span class="hljs-type">UUID</span>=&quot;abc1234-56de-78fg-90hi-jklmnopqrs&quot; <span class="hljs-keyword">TYPE</span>=&quot;ext4&quot;<br></code></pre></td></tr></table></figure>

<h4 id="5-2-编辑-etc-fstab"><a href="#5-2-编辑-etc-fstab" class="headerlink" title="5.2 编辑 &#x2F;etc&#x2F;fstab"></a>5.2 编辑 &#x2F;etc&#x2F;fstab</h4><p>打开 <code>/etc/fstab</code> 文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> nano /etc/fstab<br></code></pre></td></tr></table></figure>

<p>添加一行以指定自动挂载：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">UUID</span>=abc1234-<span class="hljs-number">56</span>de-<span class="hljs-number">78</span>fg-<span class="hljs-number">90</span>hi-jklmnopqrs /mnt/mydisk ext4 defaults <span class="hljs-number">0</span> <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>

<h4 id="5-3-测试-etc-fstab-配置"><a href="#5-3-测试-etc-fstab-配置" class="headerlink" title="5.3 测试 &#x2F;etc&#x2F;fstab 配置"></a>5.3 测试 &#x2F;etc&#x2F;fstab 配置</h4><p>可以使用 <code>mount -a</code> 命令测试 <code>/etc/fstab</code> 中的配置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> mount -a<br></code></pre></td></tr></table></figure>

<p>如果没有错误信息，则说明配置正确。</p>
<h3 id="6-为虚拟机增加硬盘并分区的操作"><a href="#6-为虚拟机增加硬盘并分区的操作" class="headerlink" title="6. 为虚拟机增加硬盘并分区的操作"></a>6. 为虚拟机增加硬盘并分区的操作</h3><h4 id="6-1-在虚拟机中添加硬盘"><a href="#6-1-在虚拟机中添加硬盘" class="headerlink" title="6.1 在虚拟机中添加硬盘"></a>6.1 在虚拟机中添加硬盘</h4><p>以下是如何在常见的虚拟机管理器中添加新的虚拟硬盘：</p>
<ul>
<li><p><strong>VirtualBox</strong>：</p>
<ol>
<li>关闭虚拟机。</li>
<li>打开虚拟机设置。</li>
<li>选择“存储”选项。</li>
<li>点击“添加硬盘”图标，选择“创建新的虚拟硬盘”。</li>
<li>按照向导完成硬盘创建过程。</li>
</ol>
</li>
<li><p><strong>VMware</strong>：</p>
<ol>
<li>关闭虚拟机。</li>
<li>打开虚拟机设置。</li>
<li>在“硬件”选项卡中选择“添加”。</li>
<li>选择“硬盘”，然后按照向导完成硬盘添加。</li>
</ol>
</li>
</ul>
<h4 id="6-2-启动虚拟机并分区"><a href="#6-2-启动虚拟机并分区" class="headerlink" title="6.2 启动虚拟机并分区"></a>6.2 启动虚拟机并分区</h4><ol>
<li><p><strong>启动虚拟机</strong>。</p>
</li>
<li><p><strong>使用 lsblk 查看新的硬盘</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">lsblk<br></code></pre></td></tr></table></figure>

<p>新硬盘可能显示为 <code>/dev/sdb</code>（或其他名称，取决于已有的硬盘）。</p>
</li>
<li><p><strong>创建分区</strong>：<br>使用 <code>fdisk</code> 创建分区：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> fdisk /dev/sdb<br></code></pre></td></tr></table></figure>

<ul>
<li>输入 <code>n</code> 创建新分区。</li>
<li>输入 <code>p</code> 创建主分区或 <code>l</code> 创建逻辑分区。</li>
<li>输入分区编号和起始、结束扇区（可以使用默认值）。</li>
<li>输入 <code>w</code> 保存并退出。</li>
</ul>
</li>
<li><p><strong>格式化分区</strong>：<br>格式化新创建的分区 <code>/dev/sdb1</code> 为 ext4 文件系统：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> mkfs.ext4 /dev/sdb1<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>挂载分区</strong>：<br>创建挂载点并挂载分区：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mkdir</span> /mnt/newdisk<br><span class="hljs-built_in">sudo</span> mount /dev/sdb1 /mnt/newdisk<br></code></pre></td></tr></table></figure></li>
</ol>
<p>在 Linux 中，磁盘分区和挂载是管理存储设备的重要操作。了解如何创建和格式化分区、挂载文件系统，以及设置自动挂载对于有效地使用 Linux 系统是至关重要的。在虚拟机中增加硬盘并进行分区的过程与在物理机上类似，只需在虚拟机管理器中完成硬件设置即可。通过这些操作，用户可以灵活地管理和使用系统的存储资源。</p>
<h2 id="第八章-网络配置"><a href="#第八章-网络配置" class="headerlink" title="第八章 网络配置"></a>第八章 网络配置</h2><p>原理图</p>
<p><img src="/../assets/Linux/image-20241021215635033.png" srcset="/img/loading.gif" lazyload alt="image-20241021215635033"></p>
<p>个人理解：</p>
<blockquote>
<p>可以将VMnet8看作一个具有NAT功能的虚拟路由器，它负责在虚拟机和外部网络之间进行通信。具体来说：</p>
<p>VMnet8作为虚拟路由器：<br>在NAT模式下，VMnet8相当于虚拟机的默认网关，它为虚拟机提供访问外部网络的能力。就像物理路由器一样，它负责在虚拟网络和外部网络之间转发数据包。</p>
<p>NAT功能：<br>VMnet8的NAT功能会将虚拟机（例如你的ens33上的IP地址）的私有IP地址转换为宿主机的公网IP或宿主机可以与外部网络通信的IP地址。这样，虚拟机即便使用的是一个私有的IP地址（如192.168.x.x），也能通过宿主机与外部网络进行通信。</p>
<p>IP地址转换：<br>当虚拟机向外部网络发出请求时，VMware的NAT功能会将虚拟机的私有IP地址转换成宿主机的IP地址，从而使虚拟机能够正常访问外部网络。外部网络收到请求后，将响应返回给宿主机，VMware再通过NAT将响应转发回虚拟机。</p>
</blockquote>
<h3 id="1-常用的-Linux-网络配置指令"><a href="#1-常用的-Linux-网络配置指令" class="headerlink" title="1. 常用的 Linux 网络配置指令"></a>1. 常用的 Linux 网络配置指令</h3><h4 id="1-1-查看网络接口信息"><a href="#1-1-查看网络接口信息" class="headerlink" title="1.1 查看网络接口信息"></a>1.1 查看网络接口信息</h4><ul>
<li><p><strong><code>ip</code> 命令</strong><br><code>ip</code> 是一个功能强大的网络管理工具，它可以用来查看和修改网络配置。常用的 <code>ip</code> 命令包括：</p>
<ul>
<li><p>查看所有网络接口的状态：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ip addr<br></code></pre></td></tr></table></figure>

<p>这个命令会显示系统中所有网络接口的 IP 地址、MAC 地址、广播地址等信息。</p>
</li>
<li><p>查看特定接口信息，例如 <code>eth0</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ip addr show eth0<br></code></pre></td></tr></table></figure>
</li>
<li><p>启用或禁用网络接口：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> eth0 up    <span class="hljs-comment"># 启用接口</span><br><span class="hljs-built_in">sudo</span> ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> eth0 down  <span class="hljs-comment"># 禁用接口</span><br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong><code>ifconfig</code> 命令</strong><br><code>ifconfig</code> 是早期的网络管理工具，虽然被 <code>ip</code> 取代，但仍然常用。</p>
<ul>
<li><p>查看网络接口信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ifconfig<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong><code>nmcli</code> 命令</strong><br><code>nmcli</code> 是 NetworkManager 的命令行工具，用于管理网络连接：</p>
<ul>
<li><p>查看所有连接：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">nmcli connection show<br></code></pre></td></tr></table></figure>
</li>
<li><p>启用或禁用连接：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> nmcli connection up &lt;连接名&gt;<br><span class="hljs-built_in">sudo</span> nmcli connection down &lt;连接名&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="1-2-检测网络连接"><a href="#1-2-检测网络连接" class="headerlink" title="1.2 检测网络连接"></a>1.2 检测网络连接</h4><ul>
<li><p><strong><code>ping</code> 命令</strong><br><code>ping</code> 用于测试网络的连通性：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping 8.8.8.8   <span class="hljs-comment"># Ping Google 公共 DNS 服务器</span><br></code></pre></td></tr></table></figure>

<p>如果能收到响应，说明与网络连通。</p>
</li>
<li><p><strong><code>traceroute</code> 命令</strong><br><code>traceroute</code> 用于追踪网络数据包经过的路径：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">traceroute www.google.com<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong><code>netstat</code> 命令</strong><br><code>netstat</code> 用于查看网络连接和端口使用情况：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">netstat -tuln   <span class="hljs-comment"># 显示当前监听的端口</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="1-3-网络故障排查"><a href="#1-3-网络故障排查" class="headerlink" title="1.3 网络故障排查"></a>1.3 网络故障排查</h4><ul>
<li><p><strong><code>dig</code> 命令</strong><br><code>dig</code> 用于查询 DNS 解析：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dig www.google.com<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong><code>nslookup</code> 命令</strong><br><code>nslookup</code> 也是一个 DNS 查询工具：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">nslookup www.google.com<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong><code>tcpdump</code> 命令</strong><br><code>tcpdump</code> 是一个强大的网络抓包工具，用于捕获和分析网络流量：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> tcpdump -i eth0<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-配置-Linux-静态-IP-地址"><a href="#2-配置-Linux-静态-IP-地址" class="headerlink" title="2. 配置 Linux 静态 IP 地址"></a>2. 配置 Linux 静态 IP 地址</h3><p>配置静态 IP 地址意味着在系统启动时手动为网络接口分配固定的 IP，而不是通过 DHCP 动态获取。以下步骤展示了如何为 Linux 服务器配置静态 IP。</p>
<h4 id="编辑-etc-sysconfig-network-scripts-ifcfg-ens33-文件（CentOS-RHEL-系列）"><a href="#编辑-etc-sysconfig-network-scripts-ifcfg-ens33-文件（CentOS-RHEL-系列）" class="headerlink" title="编辑 /etc/sysconfig/network-scripts/ifcfg-ens33 文件（CentOS&#x2F;RHEL 系列）"></a>编辑 <code>/etc/sysconfig/network-scripts/ifcfg-ens33</code> 文件（CentOS&#x2F;RHEL 系列）</h4><ol>
<li><p><strong>打开配置文件</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /etc/sysconfig/network-scripts/ifcfg-ens33<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>添加静态 IP 配置</strong>：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># 网络接口的类型，通常为以太网（Ethernet）</span><br><span class="hljs-attr">TYPE</span>=<span class="hljs-string">&quot;Ethernet&quot;</span><br><br><span class="hljs-comment"># 代理方法设置，&quot;none&quot; 表示不使用代理</span><br><span class="hljs-attr">PROXY_METHOD</span>=<span class="hljs-string">&quot;none&quot;</span><br><br><span class="hljs-comment"># 指示此网络连接是否仅用于浏览器，&quot;no&quot; 表示不仅限于浏览器</span><br><span class="hljs-attr">BROWSER_ONLY</span>=<span class="hljs-string">&quot;no&quot;</span><br><br><span class="hljs-comment"># 设置IP地址的获取方式，&quot;static&quot; 表示使用静态IP地址</span><br><span class="hljs-attr">BOOTPROTO</span>=<span class="hljs-string">&quot;static&quot;</span><br><br><span class="hljs-comment"># 是否将该接口设置为默认路由接口，&quot;yes&quot; 表示该接口为默认网关</span><br><span class="hljs-attr">DEFROUTE</span>=<span class="hljs-string">&quot;yes&quot;</span><br><br><span class="hljs-comment"># 如果IPv4配置失败，是否视为严重错误，&quot;no&quot; 表示继续尝试其他协议</span><br><span class="hljs-attr">IPV4_FAILURE_FATAL</span>=<span class="hljs-string">&quot;no&quot;</span><br><br><span class="hljs-comment"># 是否启用IPv6协议，&quot;yes&quot; 表示启用IPv6</span><br><span class="hljs-attr">IPV6INIT</span>=<span class="hljs-string">&quot;yes&quot;</span><br><br><span class="hljs-comment"># 是否通过无状态自动配置来配置IPv6地址，&quot;yes&quot; 表示启用自动配置</span><br><span class="hljs-attr">IPV6_AUTOCONF</span>=<span class="hljs-string">&quot;yes&quot;</span><br><br><span class="hljs-comment"># 是否将该接口设置为IPv6的默认路由，&quot;yes&quot; 表示该接口为IPv6的默认网关</span><br><span class="hljs-attr">IPV6_DEFROUTE</span>=<span class="hljs-string">&quot;yes&quot;</span><br><br><span class="hljs-comment"># 如果IPv6配置失败，是否视为严重错误，&quot;no&quot; 表示不视为致命错误</span><br><span class="hljs-attr">IPV6_FAILURE_FATAL</span>=<span class="hljs-string">&quot;no&quot;</span><br><br><span class="hljs-comment"># IPv6地址生成模式，&quot;stable-privacy&quot; 表示使用稳定隐私地址生成</span><br><span class="hljs-attr">IPV6_ADDR_GEN_MODE</span>=<span class="hljs-string">&quot;stable-privacy&quot;</span><br><br><span class="hljs-comment"># 网络接口的名称，通常由系统命名，这里是&quot;ens33&quot;</span><br><span class="hljs-attr">NAME</span>=<span class="hljs-string">&quot;ens33&quot;</span><br><br><span class="hljs-comment"># 网络接口的唯一标识符（UUID），用于唯一标识此网络接口</span><br><span class="hljs-attr">UUID</span>=<span class="hljs-string">&quot;21e7c1a7-3eaa-4fa1-9c20-5dfce94667ff&quot;</span><br><br><span class="hljs-comment"># 该配置文件针对的物理设备名称，与 NAME 字段相同</span><br><span class="hljs-attr">DEVICE</span>=<span class="hljs-string">&quot;ens33&quot;</span><br><br><span class="hljs-comment"># 是否在系统启动时自动启用此网络接口，&quot;yes&quot; 表示自动启用</span><br><span class="hljs-attr">ONBOOT</span>=<span class="hljs-string">&quot;yes&quot;</span><br><br><span class="hljs-comment"># 静态IPv4地址，配置此接口的IP地址为192.168.200.130</span><br><span class="hljs-attr">IPADDR</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">200.130</span><br><br><span class="hljs-comment"># 指定默认网关的地址，这里是192.168.200.2</span><br><span class="hljs-attr">GATEWAY</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">200.2</span><br><br><span class="hljs-comment"># 指定DNS服务器的地址，这里DNS服务器是192.168.200.2</span><br><span class="hljs-attr">DNS1</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">200.2</span><br><br><span class="hljs-comment"># 网络接口的防火墙区域，这里指定为&quot;public&quot;区域，通常安全级别较低</span><br><span class="hljs-attr">ZONE</span>=public<br><br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>重启网络服务</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl restart network<br></code></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-域名解析过程"><a href="#3-域名解析过程" class="headerlink" title="3. 域名解析过程"></a>3. 域名解析过程</h3><p>域名解析（DNS 解析）是将人类易读的域名（如 <code>www.example.com</code>）转换为计算机可以理解的 IP 地址（如 <code>93.184.216.34</code>）的过程。DNS 解析是通过递归查询和层级结构完成的。</p>
<p><img src="/../assets/Linux/image-20241021220151695.png" srcset="/img/loading.gif" lazyload alt="image-20241021220151695"></p>
<h4 id="3-1-DNS-解析的详细过程"><a href="#3-1-DNS-解析的详细过程" class="headerlink" title="3.1 DNS 解析的详细过程"></a>3.1 DNS 解析的详细过程</h4><ol>
<li><p><strong>用户请求域名</strong>：<br>用户在浏览器中输入 <code>www.example.com</code>，操作系统会首先检查本地的 DNS 缓存，看看是否已经有该域名的 IP 地址。如果有，直接返回缓存的结果。</p>
</li>
<li><p><strong>查询本地域名服务器</strong>：<br>如果缓存中没有相应记录，操作系统会向配置的本地 DNS 服务器发送查询请求，通常是路由器或 ISP 提供的 DNS 服务器。</p>
</li>
<li><p><strong>本地 DNS 服务器查询根 DNS 服务器</strong>：<br>本地 DNS 服务器首先会查询根 DNS 服务器，根服务器返回负责顶级域 <code>.com</code> 的 DNS 服务器地址。</p>
</li>
<li><p><strong>查询顶级域名服务器</strong>：<br>本地 DNS 服务器向 <code>.com</code> 顶级域名服务器发送查询请求，顶级域名服务器返回 <code>example.com</code> 的权威 DNS 服务器地址。</p>
</li>
<li><p><strong>查询权威 DNS 服务器</strong>：<br>本地 DNS 服务器向 <code>example.com</code> 的权威 DNS 服务器发送查询请求，权威服务器返回 <code>www.example.com</code> 对应的 IP 地址。</p>
</li>
<li><p><strong>返回 IP 地址并缓存</strong>：<br>本地 DNS 服务器将 IP 地址返回给客户端，并将该结果缓存，以便后续查询时加速。</p>
</li>
<li><p><strong>客户端连接服务器</strong>：<br>客户端使用获得的 IP 地址连接到目标服务器并获取网站内容。</p>
</li>
</ol>
<h4 id="3-2-重要的配置文件"><a href="#3-2-重要的配置文件" class="headerlink" title="3.2 重要的配置文件"></a>3.2 重要的配置文件</h4><ul>
<li><p><code>/etc/resolv.conf</code>：该文件指定系统使用的 DNS 服务器地址，例如：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">nameserver</span> <span class="hljs-number">8.8.8.8</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><code>/etc/hosts</code>：该文件用于静态配置域名与 IP 地址的对应关系，优先于 DNS 查询，例如：</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">127.0.0.1</span>   localhost<br><span class="hljs-number">192.168.1.100</span>   myserver<br></code></pre></td></tr></table></figure></li>
</ul>
<h2 id="第九章-进程管理"><a href="#第九章-进程管理" class="headerlink" title="第九章 进程管理"></a>第九章 进程管理</h2><h3 id="1-Linux-进程管理"><a href="#1-Linux-进程管理" class="headerlink" title="1. Linux 进程管理"></a>1. Linux 进程管理</h3><p>进程是系统运行的基本单位，Linux 提供了多种工具和命令用于查看、控制、终止和监控进程。</p>
<h4 id="1-1-查看进程"><a href="#1-1-查看进程" class="headerlink" title="1.1 查看进程"></a>1.1 查看进程</h4><ul>
<li><p><strong><code>ps</code> 命令</strong><br><code>ps</code> 用于显示当前正在运行的进程信息。常用选项包括：</p>
<ul>
<li><p>查看当前用户的所有进程：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ps -u &lt;username&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>查看所有进程（包括系统进程）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ps -ef<br></code></pre></td></tr></table></figure>
</li>
<li><p>显示所有进程全部状态</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">ps -<span class="hljs-built_in">aux</span><br></code></pre></td></tr></table></figure>

<p><strong>解释 <code>ps -aux</code> 的含义</strong>：</p>
<ul>
<li><code>ps</code>：Process Status，显示系统中进程的状态。</li>
<li><code>-a</code>：显示所有用户的进程（不只是当前用户）。</li>
<li><code>-u</code>：显示进程的详细信息，包括用户和CPU、内存使用等。</li>
<li><code>x</code>：显示没有控制终端的进程（比如守护进程）。</li>
</ul>
<p><strong><code>ps -aux</code> 输出的常见字段说明：</strong></p>
<ol>
<li><strong>USER</strong>：启动该进程的用户名称。</li>
<li><strong>PID</strong>：进程的ID（Process ID），每个进程都有一个唯一的ID。</li>
<li><strong>%CPU</strong>：进程使用的CPU百分比。</li>
<li><strong>%MEM</strong>：进程使用的内存百分比。</li>
<li><strong>VSZ</strong>：进程使用的虚拟内存大小（以KB为单位）。</li>
<li><strong>RSS</strong>：进程占用的实际内存大小（以KB为单位）。</li>
<li><strong>TTY</strong>：该进程关联的终端。<code>?</code> 表示没有关联终端。</li>
<li><strong>STAT</strong>：进程的状态码：<ul>
<li><code>R</code>：运行中</li>
<li><code>S</code>：睡眠中</li>
<li><code>D</code>：不可中断的睡眠状态（通常是等待IO）</li>
<li><code>T</code>：停止或暂停</li>
<li><code>Z</code>：僵尸进程</li>
</ul>
</li>
<li><strong>START</strong>：进程的启动时间。</li>
<li><strong>TIME</strong>：进程占用的CPU时间。</li>
<li><strong>COMMAND</strong>：启动进程的命令及其参数。</li>
</ol>
<p><strong>示例输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND<br>root         1  0.0  0.1 163184  9440 ?        Ss   10:00   0:01 /sbin/init<br>user       204  1.2  2.5 456728 65432 ?        Sl   10:01   0:15 /usr/bin/python3 script.py<br>www-data   412  0.3  0.8 321896 20764 ?        S    10:01   0:03 /usr/sbin/apache2 -k start<br>mysql      514  0.5  3.0 754328 80412 ?        S    10:01   0:10 /usr/sbin/mysqld<br>user      1305  0.0  0.3 271684  8224 pts/0    R+   10:20   0:00 ps -aux<br></code></pre></td></tr></table></figure>

<p><strong>输出内容解释：</strong></p>
<ul>
<li><code>root</code> 用户的进程 <code>1</code> 是系统的 <code>init</code> 进程，占用很少的内存和CPU。</li>
<li><code>user</code> 用户启动了一个 <code>python3</code> 的脚本，占用了较多的CPU和内存。</li>
<li><code>www-data</code> 用户启动了一个 <code>apache2</code> 服务。</li>
<li><code>mysql</code> 用户启动了 <code>mysqld</code>，是MySQL数据库服务，占用较多的内存。</li>
</ul>
<p>通过 <code>ps -aux</code>，你可以监控系统中的进程，查看每个进程的资源使用情况，并进一步进行分析和管理。</p>
</li>
<li><p>按照层次结构显示进程树：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ps -e --forest<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong><code>top</code> 命令</strong><br><code>top</code> 是一个动态显示系统中运行进程的工具，按 CPU、内存使用等实时排序。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">top<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong><code>htop</code> 命令</strong><br><code>htop</code> 是 <code>top</code> 的增强版本，提供了更友好的界面和功能（需要安装）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">htop<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong><code>pgrep</code> 命令</strong><br><code>pgrep</code> 用于根据名称查找进程的 PID：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pgrep &lt;process_name&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="1-2-控制和管理进程"><a href="#1-2-控制和管理进程" class="headerlink" title="1.2 控制和管理进程"></a>1.2 控制和管理进程</h4><ul>
<li><p><strong><code>kill</code> 命令</strong><br><code>kill</code> 用于发送信号给进程，常用于终止进程。最常用的信号是 <code>SIGKILL</code>（信号 9），表示强制终止进程。</p>
<ul>
<li><p>通过 PID 终止进程：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">kill</span> -9 &lt;pid&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong><code>killall</code> 命令</strong><br><code>killall</code> 用于通过进程名终止进程：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">killall &lt;process_name&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong><code>nice</code> 和 <code>renice</code> 命令</strong><br>这两个命令用于调整进程的优先级，<code>nice</code> 启动进程时指定优先级，<code>renice</code> 用于调整已经运行的进程优先级。</p>
<ul>
<li><p>使用 <code>nice</code> 启动一个优先级较低的进程：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">nice</span> -n 10 &lt;<span class="hljs-built_in">command</span>&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>调整已经运行的进程优先级：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">renice 5 &lt;pid&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="1-3-后台运行进程"><a href="#1-3-后台运行进程" class="headerlink" title="1.3 后台运行进程"></a>1.3 后台运行进程</h4><ul>
<li><p><strong><code>&amp;</code> 操作符</strong><br>将命令放在后台运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;<span class="hljs-built_in">command</span>&gt; &amp;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong><code>nohup</code> 命令</strong><br><code>nohup</code> 用于使命令在关闭终端后继续运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">nohup</span> &lt;<span class="hljs-built_in">command</span>&gt; &amp;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong><code>bg</code> 和 <code>fg</code> 命令</strong><br><code>bg</code> 用于将暂停的进程放到后台运行，<code>fg</code> 用于将后台进程调到前台：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">bg</span> %&lt;job_id&gt;<br><span class="hljs-built_in">fg</span> %&lt;job_id&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-Linux-服务管理"><a href="#2-Linux-服务管理" class="headerlink" title="2. Linux 服务管理"></a>2. Linux 服务管理</h3><p>Linux 中的服务（也叫守护进程）通常是后台持续运行的程序。<code>systemd</code> 和 <code>init</code> 是最常见的服务管理系统，现代 Linux 发行版大多采用 <code>systemd</code>。</p>
<h4 id="2-1-使用-systemctl-管理服务"><a href="#2-1-使用-systemctl-管理服务" class="headerlink" title="2.1 使用 systemctl 管理服务"></a>2.1 使用 <code>systemctl</code> 管理服务</h4><ul>
<li><p><strong>启动服务</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl start &lt;service_name&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>停止服务</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl stop &lt;service_name&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>重启服务</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl restart &lt;service_name&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>重新加载服务配置（不重启）</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl reload &lt;service_name&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>查看服务状态</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl status &lt;service_name&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>启用服务开机自启</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> &lt;service_name&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>禁用服务开机自启</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">disable</span> &lt;service_name&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>查看所有已启用的服务</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl list-unit-files --<span class="hljs-built_in">type</span>=service --state=enabled<br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-2-使用-service-管理服务（传统方式）"><a href="#2-2-使用-service-管理服务（传统方式）" class="headerlink" title="2.2 使用 service 管理服务（传统方式）"></a>2.2 使用 <code>service</code> 管理服务（传统方式）</h4><p>部分较老的系统仍使用 <code>service</code> 命令来管理服务：</p>
<ul>
<li><p>启动服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> service &lt;service_name&gt; start<br></code></pre></td></tr></table></figure>
</li>
<li><p>停止服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> service &lt;service_name&gt; stop<br></code></pre></td></tr></table></figure>
</li>
<li><p>重启服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> service &lt;service_name&gt; restart<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-Linux-防火墙管理"><a href="#3-Linux-防火墙管理" class="headerlink" title="3. Linux 防火墙管理"></a>3. Linux 防火墙管理</h3><p>Linux 中常用的防火墙工具包括 <code>iptables</code> 和 <code>firewalld</code>，其中 <code>firewalld</code> 是较新的工具，提供了动态配置的功能。</p>
<p><img src="/../assets/Linux/image-20241021221227087.png" srcset="/img/loading.gif" lazyload alt="image-20241021221227087"></p>
<h4 id="3-1-使用-firewalld-管理防火墙"><a href="#3-1-使用-firewalld-管理防火墙" class="headerlink" title="3.1 使用 firewalld 管理防火墙"></a>3.1 使用 <code>firewalld</code> 管理防火墙</h4><p><code>firewalld</code> 是现代 Linux 发行版中默认的防火墙管理工具，采用区域（zone）和服务（service）相结合的方式。</p>
<ul>
<li><p>**启动 <code>firewalld</code>**：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl start firewalld<br></code></pre></td></tr></table></figure>
</li>
<li><p>**停止 <code>firewalld</code>**：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl stop firewalld<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>查看当前防火墙状态</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> firewall-cmd --state<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>查看活动区域</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> firewall-cmd --get-active-zones<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>查看特定区域的规则</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> firewall-cmd --zone=public --list-all<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>允许某个端口通过防火墙</strong>（例如 HTTP 端口 80）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> firewall-cmd --zone=public --add-port=80/tcp --permanent<br><span class="hljs-built_in">sudo</span> firewall-cmd --reload<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>允许某个服务通过防火墙</strong>（例如 HTTP）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> firewall-cmd --zone=public --add-service=http --permanent<br><span class="hljs-built_in">sudo</span> firewall-cmd --reload<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="4-Linux运行级别"><a href="#4-Linux运行级别" class="headerlink" title="4.Linux运行级别"></a>4.Linux运行级别</h3><p>在 Linux 操作系统中，<strong>运行级别</strong>（Runlevel）是系统中不同状态的预定义配置，决定了系统中可以运行的服务和进程。这些运行级别决定系统的启动模式，比如是图形界面、命令行、还是维护模式等。</p>
<h4 id="1-Linux-运行级别的含义"><a href="#1-Linux-运行级别的含义" class="headerlink" title="1. Linux 运行级别的含义"></a>1. <strong>Linux 运行级别的含义</strong></h4><p>运行级别从 <code>0</code> 到 <code>6</code>，每个级别对应不同的系统运行状态：</p>
<ul>
<li><p><strong>0 - 停机（Halt）</strong>：</p>
<ul>
<li>系统将会关闭，所有进程终止，机器停止工作。执行这个级别会关闭操作系统。</li>
</ul>
</li>
<li><p><strong>1 - 单用户模式（Single-user mode）</strong>：</p>
<ul>
<li>只有 root 用户可以登录，通常用于系统维护和修复。不启用网络服务或多用户功能，适用于紧急恢复。</li>
</ul>
</li>
<li><p><strong>2 - 多用户模式（Multi-user mode）</strong>：</p>
<ul>
<li>启用多用户模式，但不支持网络服务。这种模式允许多个用户登录，但没有网络连接功能。</li>
</ul>
</li>
<li><p><strong>3 - 完整的多用户模式（Full multi-user mode）</strong>：</p>
<ul>
<li>支持多用户登录，并启用网络服务。没有图形界面，用户使用命令行登录，适用于服务器环境，建议平时使用这个</li>
</ul>
</li>
<li><p><strong>4 - 自定义模式（Unused&#x2F;Custom mode）</strong>：</p>
<ul>
<li>通常不被使用，但可以根据需要进行自定义。某些系统可能会根据特定的需求配置此级别。</li>
</ul>
</li>
<li><p><strong>5 - 图形用户界面模式（Graphical mode）</strong>：</p>
<ul>
<li>启用多用户模式，并启动图形界面（GUI）。大部分桌面系统默认使用这个级别。</li>
</ul>
</li>
<li><p><strong>6 - 重启（Reboot）</strong>：</p>
<ul>
<li>系统将重新启动，所有进程被终止，系统重新加载并启动。</li>
</ul>
</li>
</ul>
<h3 id="2-查看和切换运行级别的指令"><a href="#2-查看和切换运行级别的指令" class="headerlink" title="2. 查看和切换运行级别的指令"></a>2. <strong>查看和切换运行级别的指令</strong></h3><h4 id="2-1-查看当前运行级别："><a href="#2-1-查看当前运行级别：" class="headerlink" title="2.1 查看当前运行级别："></a>2.1 查看当前运行级别：</h4><p>你可以使用以下命令来查看系统的当前运行级别：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">runlevel<br></code></pre></td></tr></table></figure>

<p>输出示例：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">N</span> <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure>
<p><code>N</code> 表示当前没有之前的运行级别，而 <code>5</code> 表示当前运行级别是图形模式（GUI）。</p>
<h4 id="2-2-切换运行级别："><a href="#2-2-切换运行级别：" class="headerlink" title="2.2 切换运行级别："></a>2.2 切换运行级别：</h4><p>你可以使用 <code>init</code> 或 <code>systemctl</code> 命令来切换运行级别。</p>
<ul>
<li><p>使用 <code>init</code> 命令（传统方式）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> init [运行级别]<br></code></pre></td></tr></table></figure>
<p>例如，要切换到运行级别 <code>3</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> init 3<br></code></pre></td></tr></table></figure>
</li>
<li><p>使用 <code>systemctl</code> 命令（现代方式）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl isolate [目标.target]<br></code></pre></td></tr></table></figure>
<p>例如，切换到运行级别 <code>3</code>（多用户模式）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl isolate multi-user.target<br></code></pre></td></tr></table></figure>
<p>切换到运行级别 <code>5</code>（图形界面模式）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl isolate graphical.target<br><br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-3-设置默认运行级别："><a href="#2-3-设置默认运行级别：" class="headerlink" title="2.3 设置默认运行级别："></a>2.3 设置默认运行级别：</h4><p>在现代的基于 <code>systemd</code> 的 Linux 系统中，默认运行级别通过目标（target）来配置。</p>
<ul>
<li><p>查看当前默认运行级别：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl get-default<br></code></pre></td></tr></table></figure>
</li>
<li><p>设置默认运行级别为图形界面模式（运行级别5）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl set-default graphical.target<br></code></pre></td></tr></table></figure>
</li>
<li><p>设置默认运行级别为多用户模式（运行级别3）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl set-default multi-user.target<br></code></pre></td></tr></table></figure></li>
</ul>
<h2 id="第十章-RPM-与-YUM"><a href="#第十章-RPM-与-YUM" class="headerlink" title="第十章 RPM 与 YUM"></a>第十章 RPM 与 YUM</h2><h3 id="1-RPM-和-YUM-的作用"><a href="#1-RPM-和-YUM-的作用" class="headerlink" title="1. RPM 和 YUM 的作用"></a>1. <strong>RPM 和 YUM 的作用</strong></h3><h4 id="1-1-RPM（Red-Hat-Package-Manager）"><a href="#1-1-RPM（Red-Hat-Package-Manager）" class="headerlink" title="1.1 RPM（Red Hat Package Manager）"></a>1.1 RPM（Red Hat Package Manager）</h4><p><strong>RPM</strong> 是一个底层的包管理工具，专门用于管理 <code>.rpm</code> 格式的软件包。它主要提供以下功能：</p>
<ul>
<li>安装软件包</li>
<li>卸载软件包</li>
<li>升级软件包</li>
<li>查询已安装的软件包信息</li>
<li>验证软件包完整性</li>
</ul>
<p><strong>RPM</strong> 只能处理单个软件包，并且不处理软件包的依赖关系。如果安装的软件包依赖于其他包，则必须手动安装这些依赖项，这让 RPM 在处理复杂安装时变得繁琐。</p>
<h4 id="1-2-YUM（Yellowdog-Updater-Modified）"><a href="#1-2-YUM（Yellowdog-Updater-Modified）" class="headerlink" title="1.2 YUM（Yellowdog Updater, Modified）"></a>1.2 YUM（Yellowdog Updater, Modified）</h4><p><strong>YUM</strong> 是基于 RPM 的高层次软件包管理工具，它不仅可以安装、卸载、更新和查询 RPM 包，还能自动解决软件包的依赖问题。它可以从指定的软件库（repository）中下载和安装软件包，这使得 YUM 更适合管理复杂的软件包依赖关系。</p>
<h3 id="2-RPM-和-YUM-的区别"><a href="#2-RPM-和-YUM-的区别" class="headerlink" title="2. RPM 和 YUM 的区别"></a>2. <strong>RPM 和 YUM 的区别</strong></h3><table>
<thead>
<tr>
<th>功能</th>
<th>RPM</th>
<th>YUM</th>
</tr>
</thead>
<tbody><tr>
<td>包管理</td>
<td>管理 <code>.rpm</code> 软件包</td>
<td>管理 <code>.rpm</code> 软件包</td>
</tr>
<tr>
<td>依赖关系处理</td>
<td>不处理依赖关系，必须手动安装依赖</td>
<td>自动解决依赖关系，能从仓库中安装依赖包</td>
</tr>
<tr>
<td>仓库管理</td>
<td>不支持使用软件仓库</td>
<td>可以从远程仓库下载和安装软件包</td>
</tr>
<tr>
<td>常用场景</td>
<td>安装单个已下载的 <code>.rpm</code> 包</td>
<td>从仓库中安装、更新、删除软件包，解决依赖问题</td>
</tr>
<tr>
<td>安装软件</td>
<td>必须有具体的 <code>.rpm</code> 文件</td>
<td>直接通过包名查找并安装，无需下载 <code>.rpm</code> 文件</td>
</tr>
</tbody></table>
<h3 id="3-RPM-和-YUM-的使用方法与示例"><a href="#3-RPM-和-YUM-的使用方法与示例" class="headerlink" title="3. RPM 和 YUM 的使用方法与示例"></a>3. <strong>RPM 和 YUM 的使用方法与示例</strong></h3><h4 id="3-1-RPM-的使用"><a href="#3-1-RPM-的使用" class="headerlink" title="3.1 RPM 的使用"></a>3.1 RPM 的使用</h4><p><strong>安装软件包</strong>：<br>假设有一个名为 <code>example.rpm</code> 的包可以安装。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> rpm -ivh example.rpm<br></code></pre></td></tr></table></figure>
<ul>
<li><code>-i</code>：安装软件包。</li>
<li><code>-v</code>：显示详细信息。</li>
<li><code>-h</code>：显示进度条。</li>
</ul>
<p><strong>升级软件包</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> rpm -Uvh example.rpm<br></code></pre></td></tr></table></figure>
<ul>
<li><code>-U</code>：升级软件包（如果包不存在则安装）。</li>
</ul>
<p><strong>卸载软件包</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> rpm -e example<br></code></pre></td></tr></table></figure>
<ul>
<li><code>-e</code>：卸载指定软件包（无需文件扩展名 <code>.rpm</code>，只需要包名）。</li>
</ul>
<p><strong>查询已安装的软件包</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rpm -qa | grep example<br></code></pre></td></tr></table></figure>
<ul>
<li><code>-q</code>：查询软件包。</li>
<li><code>-a</code>：显示所有已安装的软件包。</li>
</ul>
<p><strong>查看包信息</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rpm -qi example<br></code></pre></td></tr></table></figure>
<ul>
<li><code>-q</code>：查询软件包信息。</li>
<li><code>-i</code>：显示包详细信息。</li>
</ul>
<p><strong>验证软件包完整性</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> rpm -V example<br></code></pre></td></tr></table></figure>
<ul>
<li><code>-V</code>：验证指定包的完整性，检查文件是否被修改。</li>
</ul>
<h4 id="3-2-YUM-的使用"><a href="#3-2-YUM-的使用" class="headerlink" title="3.2 YUM 的使用"></a>3.2 YUM 的使用</h4><p><strong>安装软件包</strong>：<br>不需要提前下载软件包，直接从仓库安装。例如安装 <code>httpd</code>（Apache Web Server）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> yum install httpd<br></code></pre></td></tr></table></figure>

<p><strong>卸载软件包</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> yum remove httpd<br></code></pre></td></tr></table></figure>

<p><strong>更新软件包</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> yum update httpd<br></code></pre></td></tr></table></figure>
<p>或者更新系统中所有的软件包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> yum update<br></code></pre></td></tr></table></figure>

<p><strong>列出可用的软件包</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum list available<br></code></pre></td></tr></table></figure>

<p><strong>查询已安装的软件包</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum list installed | grep httpd<br></code></pre></td></tr></table></figure>

<p><strong>查找软件包</strong>：<br>通过 YUM 仓库查找软件包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum search httpd<br></code></pre></td></tr></table></figure>

<p><strong>查看软件包详细信息</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum info httpd<br></code></pre></td></tr></table></figure>

<p><strong>清理缓存</strong>：<br>YUM 会将软件包的元数据缓存在本地，使用以下命令可以清除这些缓存：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> yum clean all<br></code></pre></td></tr></table></figure>

<h4 id="3-3-YUM-仓库的配置"><a href="#3-3-YUM-仓库的配置" class="headerlink" title="3.3 YUM 仓库的配置"></a>3.3 YUM 仓库的配置</h4><p>YUM 使用配置文件 <code>/etc/yum.repos.d/</code> 中的 <code>.repo</code> 文件来定义仓库。例如，<code>CentOS-Base.repo</code> 是 CentOS 的默认仓库配置文件。</p>
<p>示例：创建一个自定义的 YUM 仓库文件 <code>/etc/yum.repos.d/custom.repo</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">[custom-repo]<br>name=Custom Repository<br>baseurl=http://repository.example.com/custom/<br>enabled=1<br>gpgcheck=0<br></code></pre></td></tr></table></figure>
<ul>
<li><code>name</code>：仓库的名称。</li>
<li><code>baseurl</code>：仓库的 URL 或本地路径。</li>
<li><code>enabled</code>：是否启用该仓库（1 为启用，0 为禁用）。</li>
<li><code>gpgcheck</code>：是否启用 GPG 密钥检查。</li>
</ul>
<h3 id="4-YUM-的高级功能"><a href="#4-YUM-的高级功能" class="headerlink" title="4. YUM 的高级功能"></a>4. <strong>YUM 的高级功能</strong></h3><h4 id="4-1-YUM-组管理"><a href="#4-1-YUM-组管理" class="headerlink" title="4.1 YUM 组管理"></a>4.1 YUM 组管理</h4><p>YUM 支持安装软件组，这些组通常由多个相关软件包组成，安装一组可以方便地部署一整套相关的软件。</p>
<p><strong>列出所有软件组</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum group list<br></code></pre></td></tr></table></figure>

<p><strong>安装一个软件组</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> yum groupinstall <span class="hljs-string">&quot;Development Tools&quot;</span><br></code></pre></td></tr></table></figure>

<h4 id="4-2-检查系统中未使用的依赖"><a href="#4-2-检查系统中未使用的依赖" class="headerlink" title="4.2 检查系统中未使用的依赖"></a>4.2 检查系统中未使用的依赖</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> yum autoremove<br></code></pre></td></tr></table></figure>
<p>该命令将删除未使用的依赖包，通常在卸载软件后，可以清理残留的依赖。</p>
<h2 id="第十一章-shell编程"><a href="#第十一章-shell编程" class="headerlink" title="第十一章 shell编程"></a>第十一章 shell编程</h2><h3 id="1-Shell-的定义"><a href="#1-Shell-的定义" class="headerlink" title="1. Shell 的定义"></a>1. <strong>Shell 的定义</strong></h3><p><strong>Shell</strong> 是 Linux 和 Unix 操作系统中的命令解释器，位于用户和操作系统核心之间，允许用户通过命令行界面对系统进行操作。它不仅可以作为命令行解释器，还可以通过编写 <strong>Shell 脚本</strong> 实现自动化任务。</p>
<p>Shell 的种类很多，常见的有：</p>
<ul>
<li><strong>Bash（Bourne Again Shell）</strong>：最常见的 Linux Shell，功能强大且兼容性好。</li>
<li><strong>Zsh、Csh、Ksh</strong> 等：其他特定用途的 Shell。</li>
</ul>
<h3 id="2-Shell-编程的基础语法"><a href="#2-Shell-编程的基础语法" class="headerlink" title="2. Shell 编程的基础语法"></a>2. <strong>Shell 编程的基础语法</strong></h3><p>Shell 编程是一种脚本语言，常用于自动化任务和系统管理。在 Linux 系统中，常见的 Shell 解释器有 Bash（Bourne Again Shell）、Zsh 等。以下将详细讲解 Shell 编程的基础语法，包括注释、变量、位置参数、运算符、分支、循环、<code>case</code> 语句，以及函数的使用。</p>
<hr>
<h4 id="1-注释"><a href="#1-注释" class="headerlink" title="1. 注释"></a>1. <strong>注释</strong></h4><ul>
<li>在 Shell 脚本中，注释是用于解释代码的文字，供程序员阅读，而不会被执行。</li>
<li>单行注释使用 <code>#</code>，从 <code>#</code> 开始直到行尾的内容都会被忽略。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 这是一个单行注释</span><br></code></pre></td></tr></table></figure>

<ul>
<li>多行注释可以通过 <code>:&lt;&lt;</code> 的方式实现（不常用，但在复杂注释时可以帮助组织代码）。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">:&lt;&lt;<span class="hljs-string">&#x27;EOF&#x27;</span><br>这是多行注释<br>这里的所有内容都不会被执行<br>EOF<br></code></pre></td></tr></table></figure>

<hr>
<h4 id="2-变量"><a href="#2-变量" class="headerlink" title="2. 变量"></a>2. <strong>变量</strong></h4><h5 id="2-1-变量的定义"><a href="#2-1-变量的定义" class="headerlink" title="2.1 变量的定义"></a>2.1 变量的定义</h5><ul>
<li>在 Shell 中，变量的赋值方式是：<code>变量名=值</code>。注意，等号两边不能有空格。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">name=<span class="hljs-string">&quot;Alice&quot;</span><br>age=25<br></code></pre></td></tr></table></figure>

<h5 id="2-2-变量的引用"><a href="#2-2-变量的引用" class="headerlink" title="2.2 变量的引用"></a>2.2 变量的引用</h5><ul>
<li>通过 <code>$</code> 来引用变量的值。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$name</span>  <span class="hljs-comment"># 输出 Alice</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$age</span>   <span class="hljs-comment"># 输出 25</span><br></code></pre></td></tr></table></figure>

<h5 id="2-3-变量的作用域"><a href="#2-3-变量的作用域" class="headerlink" title="2.3 变量的作用域"></a>2.3 变量的作用域</h5><ul>
<li><strong>局部变量</strong>：只在当前 Shell 脚本中有效。</li>
<li><strong>环境变量</strong>：通过 <code>export</code> 命令导出变量，使其在当前 Shell 进程及其子进程中可用。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;/usr/local/bin:<span class="hljs-variable">$PATH</span>&quot;</span>  <span class="hljs-comment"># 将路径添加到环境变量</span><br></code></pre></td></tr></table></figure>

<h5 id="2-4-特殊变量"><a href="#2-4-特殊变量" class="headerlink" title="2.4 特殊变量"></a>2.4 特殊变量</h5><ul>
<li><code>$0</code>：当前脚本的名字。</li>
<li><code>$1, $2, ..., $n</code>：传递给脚本的参数，称为位置参数。</li>
<li><code>$#</code>：参数的个数。</li>
<li><code>$*</code> 和 <code>$@</code>：代表传递给脚本的所有参数，区别在于它们处理带引号的参数时的行为不同。</li>
<li><code>$?</code>：上一条命令的退出状态码。</li>
</ul>
<p><strong>示例</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;脚本名：<span class="hljs-variable">$0</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;第一个参数：<span class="hljs-variable">$1</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;参数个数：<span class="hljs-variable">$#</span>&quot;</span><br></code></pre></td></tr></table></figure>

<hr>
<h4 id="3-位置参数"><a href="#3-位置参数" class="headerlink" title="3. 位置参数"></a>3. <strong>位置参数</strong></h4><ul>
<li>在调用脚本时，可以传递参数，这些参数可以通过 <code>$1, $2, ..., $n</code> 进行访问。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Hello, <span class="hljs-variable">$1</span>!&quot;</span><br></code></pre></td></tr></table></figure>

<p>运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./script.sh Alice  <span class="hljs-comment"># 输出 &quot;Hello, Alice!&quot;</span><br></code></pre></td></tr></table></figure>

<hr>
<h4 id="4-运算符"><a href="#4-运算符" class="headerlink" title="4. 运算符"></a>4. <strong>运算符</strong></h4><h5 id="4-1-算术运算符"><a href="#4-1-算术运算符" class="headerlink" title="4.1 算术运算符"></a>4.1 算术运算符</h5><ul>
<li>Shell 支持基本的算术运算，可以使用 <code>expr</code> 命令或 <code>$(( ))</code> 进行计算。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">a=5<br>b=3<br><span class="hljs-built_in">sum</span>=$(<span class="hljs-built_in">expr</span> <span class="hljs-variable">$a</span> + <span class="hljs-variable">$b</span>)  <span class="hljs-comment"># 使用 expr 进行加法运算</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$sum</span>            <span class="hljs-comment"># 输出 8</span><br><br>result=$((a * b))    <span class="hljs-comment"># 使用 $(( )) 进行乘法运算</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$result</span>         <span class="hljs-comment"># 输出 15</span><br></code></pre></td></tr></table></figure>

<h5 id="4-2-关系运算符"><a href="#4-2-关系运算符" class="headerlink" title="4.2 关系运算符"></a>4.2 关系运算符</h5><ul>
<li>用于比较数值，常用于条件判断中。<ul>
<li><code>-eq</code>：等于</li>
<li><code>-ne</code>：不等于</li>
<li><code>-gt</code>：大于</li>
<li><code>-ge</code>：大于或等于</li>
<li><code>-lt</code>：小于</li>
<li><code>-le</code>：小于或等于</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$a</span> -gt <span class="hljs-variable">$b</span> ]; <span class="hljs-keyword">then</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$a</span> is greater than <span class="hljs-variable">$b</span>&quot;</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure>

<h5 id="4-3-逻辑运算符"><a href="#4-3-逻辑运算符" class="headerlink" title="4.3 逻辑运算符"></a>4.3 逻辑运算符</h5><ul>
<li>用于连接多个条件。<ul>
<li><code>-a</code>：与（AND）</li>
<li><code>-o</code>：或（OR）</li>
<li><code>!</code>：非（NOT）</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$a</span> -gt 0 -a <span class="hljs-variable">$b</span> -lt 10 ]; <span class="hljs-keyword">then</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a is positive and b is less than 10&quot;</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure>

<h5 id="4-4-字符串运算符"><a href="#4-4-字符串运算符" class="headerlink" title="4.4 字符串运算符"></a>4.4 字符串运算符</h5><ul>
<li>用于字符串的比较。<ul>
<li><code>=</code>：字符串相等</li>
<li><code>!=</code>：字符串不等</li>
<li><code>-z</code>：字符串长度为零</li>
<li><code>-n</code>：字符串非空</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$name</span>&quot;</span> = <span class="hljs-string">&quot;Alice&quot;</span> ]; <span class="hljs-keyword">then</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Hello, Alice!&quot;</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure>

<hr>
<h4 id="5-条件分支"><a href="#5-条件分支" class="headerlink" title="5. 条件分支"></a>5. <strong>条件分支</strong></h4><h5 id="5-1-if-else-结构"><a href="#5-1-if-else-结构" class="headerlink" title="5.1 if-else 结构"></a>5.1 <code>if-else</code> 结构</h5><ul>
<li><code>if</code> 语句用于条件判断，<code>then</code> 部分在条件为真时执行，<code>else</code> 部分在条件为假时执行。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$a</span> -gt <span class="hljs-variable">$b</span> ]; <span class="hljs-keyword">then</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$a</span> is greater than <span class="hljs-variable">$b</span>&quot;</span><br><span class="hljs-keyword">else</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$a</span> is not greater than <span class="hljs-variable">$b</span>&quot;</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure>

<h5 id="5-2-elif（else-if）"><a href="#5-2-elif（else-if）" class="headerlink" title="5.2 elif（else if）"></a>5.2 <code>elif</code>（else if）</h5><ul>
<li>可以用 <code>elif</code> 来进行多条件判断。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$a</span> -eq <span class="hljs-variable">$b</span> ]; <span class="hljs-keyword">then</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$a</span> equals <span class="hljs-variable">$b</span>&quot;</span><br><span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$a</span> -gt <span class="hljs-variable">$b</span> ]; <span class="hljs-keyword">then</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$a</span> is greater than <span class="hljs-variable">$b</span>&quot;</span><br><span class="hljs-keyword">else</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$a</span> is less than <span class="hljs-variable">$b</span>&quot;</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure>

<hr>
<h4 id="6-循环"><a href="#6-循环" class="headerlink" title="6. 循环"></a>6. <strong>循环</strong></h4><h5 id="6-1-for-循环"><a href="#6-1-for-循环" class="headerlink" title="6.1 for 循环"></a>6.1 <code>for</code> 循环</h5><ul>
<li>用于遍历一组值。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 1 2 3; <span class="hljs-keyword">do</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Number: <span class="hljs-variable">$i</span>&quot;</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure>

<h5 id="6-2-while-循环"><a href="#6-2-while-循环" class="headerlink" title="6.2 while 循环"></a>6.2 <code>while</code> 循环</h5><ul>
<li>当条件为真时执行循环体。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">count=0<br><span class="hljs-keyword">while</span> [ <span class="hljs-variable">$count</span> -lt 5 ]; <span class="hljs-keyword">do</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Count: <span class="hljs-variable">$count</span>&quot;</span><br>  count=$((count + <span class="hljs-number">1</span>))<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure>

<h5 id="6-3-until-循环"><a href="#6-3-until-循环" class="headerlink" title="6.3 until 循环"></a>6.3 <code>until</code> 循环</h5><ul>
<li>当条件为假时执行循环体。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">count=0<br><span class="hljs-keyword">until</span> [ <span class="hljs-variable">$count</span> -ge 5 ]; <span class="hljs-keyword">do</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Count: <span class="hljs-variable">$count</span>&quot;</span><br>  count=$((count + <span class="hljs-number">1</span>))<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure>

<hr>
<h4 id="7-case-语句"><a href="#7-case-语句" class="headerlink" title="7. case 语句"></a>7. <strong><code>case</code> 语句</strong></h4><ul>
<li>用于多条件匹配，相当于 <code>switch-case</code>。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">fruit=<span class="hljs-string">&quot;apple&quot;</span><br><br><span class="hljs-keyword">case</span> <span class="hljs-variable">$fruit</span> <span class="hljs-keyword">in</span><br>  <span class="hljs-string">&quot;apple&quot;</span>)<br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;This is an apple.&quot;</span> ;;<br>  <span class="hljs-string">&quot;banana&quot;</span>)<br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;This is a banana.&quot;</span> ;;<br>  *)<br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Unknown fruit.&quot;</span> ;;<br><span class="hljs-keyword">esac</span><br></code></pre></td></tr></table></figure>

<hr>
<h4 id="8-函数"><a href="#8-函数" class="headerlink" title="8. 函数"></a>8. <strong>函数</strong></h4><h5 id="8-1-定义函数"><a href="#8-1-定义函数" class="headerlink" title="8.1 定义函数"></a>8.1 定义函数</h5><ul>
<li>函数用于封装代码块，可以重复调用。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-function"><span class="hljs-title">my_function</span></span>() &#123;<br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;This is a function.&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="8-2-调用函数"><a href="#8-2-调用函数" class="headerlink" title="8.2 调用函数"></a>8.2 调用函数</h5><ul>
<li>使用函数名即可调用函数。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">my_function  <span class="hljs-comment"># 输出 &quot;This is a function.&quot;</span><br></code></pre></td></tr></table></figure>

<h5 id="8-3-带参数的函数"><a href="#8-3-带参数的函数" class="headerlink" title="8.3 带参数的函数"></a>8.3 带参数的函数</h5><ul>
<li>可以向函数传递参数，通过 <code>$1, $2, ...</code> 访问参数。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-function"><span class="hljs-title">greet</span></span>() &#123;<br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Hello, <span class="hljs-variable">$1</span>!&quot;</span><br>&#125;<br><br>greet <span class="hljs-string">&quot;Alice&quot;</span>  <span class="hljs-comment"># 输出 &quot;Hello, Alice!&quot;</span><br></code></pre></td></tr></table></figure>

<h3 id="3-运行-Shell-脚本"><a href="#3-运行-Shell-脚本" class="headerlink" title="3. 运行 Shell 脚本"></a>3. <strong>运行 Shell 脚本</strong></h3><p><strong>第一种方式</strong></p>
<ul>
<li>编写脚本文件（扩展名通常为 <code>.sh</code>），例如 <code>backup.sh</code>。</li>
<li>确保脚本有执行权限：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> +x backup.sh<br></code></pre></td></tr></table></figure></li>
<li>运行脚本：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">./backup.sh<br> 或者使用绝对路径 /root/shcode/backup.sh<br></code></pre></td></tr></table></figure></li>
</ul>
<p><strong>第二种方式</strong></p>
<ul>
<li><p>不用赋予脚本执行权限，直接执行</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">sh</span> backup.<span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="4-数据库备份-Shell-脚本示例"><a href="#4-数据库备份-Shell-脚本示例" class="headerlink" title="4.数据库备份 Shell 脚本示例"></a>4.<strong>数据库备份 Shell 脚本示例</strong></h3><p>假设你要对 MySQL 数据库进行备份，可以编写一个简单的 Shell 脚本自动化完成此任务。</p>
<h4 id="4-1-脚本内容（mysql-backup-sh）："><a href="#4-1-脚本内容（mysql-backup-sh）：" class="headerlink" title="4.1 脚本内容（mysql_backup.sh）："></a>4.1 脚本内容（<code>mysql_backup.sh</code>）：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># 配置参数</span><br>DB_NAME=<span class="hljs-string">&quot;your_database_name&quot;</span>  <span class="hljs-comment"># 需要备份的数据库名</span><br>DB_USER=<span class="hljs-string">&quot;your_username&quot;</span>       <span class="hljs-comment"># 数据库用户名</span><br>DB_PASSWORD=<span class="hljs-string">&quot;your_password&quot;</span>   <span class="hljs-comment"># 数据库密码</span><br>BACKUP_PATH=<span class="hljs-string">&quot;/path/to/backup&quot;</span> <span class="hljs-comment"># 备份存储的路径</span><br>DATE=$(<span class="hljs-built_in">date</span> +%Y%m%d_%H%M%S)   <span class="hljs-comment"># 当前日期时间，用于生成文件名</span><br><br><span class="hljs-comment"># 创建备份目录（如果不存在）</span><br><span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$BACKUP_PATH</span><br><br><span class="hljs-comment"># 备份数据库</span><br>mysqldump -u<span class="hljs-variable">$DB_USER</span> -p<span class="hljs-variable">$DB_PASSWORD</span> <span class="hljs-variable">$DB_NAME</span> &gt; <span class="hljs-variable">$BACKUP_PATH</span>/<span class="hljs-variable">$&#123;DB_NAME&#125;</span>_backup_<span class="hljs-variable">$DATE</span>.sql<br><br><span class="hljs-comment"># 检查备份是否成功</span><br><span class="hljs-keyword">if</span> [ $? -eq 0 ]; <span class="hljs-keyword">then</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;数据库 <span class="hljs-variable">$DB_NAME</span> 备份成功，存储在 <span class="hljs-variable">$BACKUP_PATH</span>/<span class="hljs-variable">$&#123;DB_NAME&#125;</span>_backup_<span class="hljs-variable">$DATE</span>.sql&quot;</span><br><span class="hljs-keyword">else</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;数据库 <span class="hljs-variable">$DB_NAME</span> 备份失败&quot;</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure>

<h4 id="4-2-脚本说明："><a href="#4-2-脚本说明：" class="headerlink" title="4.2 脚本说明："></a>4.2 脚本说明：</h4><ul>
<li><code>DB_NAME</code>、<code>DB_USER</code>、<code>DB_PASSWORD</code>：配置需要备份的数据库名和 MySQL 连接信息。</li>
<li><code>BACKUP_PATH</code>：指定数据库备份文件的存储位置。</li>
<li><code>DATE=$(date +%Y%m%d_%H%M%S)</code>：获取当前的日期和时间，用于生成唯一的备份文件名。</li>
<li><code>mysqldump</code>：是用于导出 MySQL 数据库内容的命令，生成 <code>.sql</code> 文件。</li>
</ul>
<h4 id="4-3-运行脚本"><a href="#4-3-运行脚本" class="headerlink" title="4.3 运行脚本"></a>4.3 运行脚本</h4><ol>
<li>将脚本保存为 <code>mysql_backup.sh</code>。</li>
<li>赋予执行权限：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> +x mysql_backup.sh<br></code></pre></td></tr></table></figure></li>
<li>运行脚本：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./mysql_backup.sh<br></code></pre></td></tr></table></figure></li>
</ol>
<h4 id="4-4-备份结果"><a href="#4-4-备份结果" class="headerlink" title="4.4 备份结果"></a>4.4 备份结果</h4><p>脚本运行后，会在指定的 <code>BACKUP_PATH</code> 中生成一个 <code>.sql</code> 文件，其中包含数据库的完整备份。</p>
<h2 id="第十二章-日志管理"><a href="#第十二章-日志管理" class="headerlink" title="第十二章 日志管理"></a>第十二章 日志管理</h2><p>Linux 系统有强大的日志管理系统，用于记录系统、服务、应用程序的运行情况。了解日志管理有助于排查问题、调试应用及监控系统状态。</p>
<hr>
<h3 id="1-日志文件概览"><a href="#1-日志文件概览" class="headerlink" title="1. 日志文件概览"></a>1. <strong>日志文件概览</strong></h3><p>在 Linux 系统中，日志文件主要位于 <code>/var/log</code> 目录下，不同的日志文件记录不同类型的系统信息。以下是一些常见的日志文件：</p>
<ul>
<li><code>/var/log/messages</code>：系统的通用日志文件，记录系统启动信息、驱动信息、用户登录等。</li>
<li><code>/var/log/syslog</code>：系统日志，记录系统级别的消息和调试信息（适用于 Debian 系）。</li>
<li><code>/var/log/dmesg</code>：内核环缓冲区消息，记录与硬件相关的信息，尤其是启动时的内核信息。</li>
<li><code>/var/log/auth.log</code>：认证日志，记录所有认证相关的信息，如登录、sudo 使用等（适用于 Debian 系）。</li>
<li><code>/var/log/secure</code>：同样是认证日志，适用于 RHEL 系统。</li>
<li><code>/var/log/wtmp</code> 和 <code>/var/log/btmp</code>：记录所有成功（<code>wtmp</code>）和失败（<code>btmp</code>）的登录尝试。</li>
<li><code>/var/log/cron</code>：记录与定时任务（Cron jobs）相关的日志。</li>
<li><code>/var/log/boot.log</code>：系统启动过程的日志。</li>
<li><code>/var/log/mail.log</code>：与邮件系统相关的日志（例如 Sendmail、Postfix）。</li>
<li><code>/var/log/httpd/</code>：Web 服务器（如 Apache、Nginx）的日志文件目录。</li>
</ul>
<hr>
<h3 id="2-常用日志管理指令"><a href="#2-常用日志管理指令" class="headerlink" title="2. 常用日志管理指令"></a>2. <strong>常用日志管理指令</strong></h3><h4 id="2-1-查看日志内容的常用命令"><a href="#2-1-查看日志内容的常用命令" class="headerlink" title="2.1 查看日志内容的常用命令"></a>2.1 查看日志内容的常用命令</h4><ul>
<li>**<code>cat</code>**：直接输出日志文件的全部内容。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> /var/log/syslog<br></code></pre></td></tr></table></figure>

<ul>
<li>**<code>tail</code>**：查看日志文件的最后几行，常用于查看最近的日志更新。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">tail</span> /var/log/messages<br><span class="hljs-built_in">tail</span> -n 100 /var/log/messages  <span class="hljs-comment"># 查看最后100行日志</span><br></code></pre></td></tr></table></figure>

<ul>
<li>**<code>tail -f</code>**：实时查看日志文件的更新，通常用于调试或监控。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">tail</span> -f /var/log/messages<br></code></pre></td></tr></table></figure>

<ul>
<li>**<code>less</code>**：按页查看大文件，支持滚动和查找功能，适合查看长日志。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">less /var/log/dmesg<br></code></pre></td></tr></table></figure>

<ul>
<li>**<code>grep</code>**：从日志文件中筛选出包含特定关键字的日志条目。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">grep <span class="hljs-string">&quot;error&quot;</span> /var/log/syslog  <span class="hljs-comment"># 查找包含 &quot;error&quot; 的日志</span><br></code></pre></td></tr></table></figure>

<ul>
<li>**<code>dmesg</code>**：查看内核环缓冲区中的消息，显示启动时和硬件相关的信息。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dmesg | less  <span class="hljs-comment"># 分页查看内核日志</span><br></code></pre></td></tr></table></figure>

<ul>
<li>**<code>journalctl</code>**：查看 <code>systemd</code> 管理的日志，支持过滤、分页等功能。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">journalctl  <span class="hljs-comment"># 查看所有日志</span><br>journalctl -xe  <span class="hljs-comment"># 查看详细的错误日志</span><br>journalctl -u ssh  <span class="hljs-comment"># 查看与 ssh 服务相关的日志</span><br></code></pre></td></tr></table></figure>

<h4 id="2-2-日志文件管理命令"><a href="#2-2-日志文件管理命令" class="headerlink" title="2.2 日志文件管理命令"></a>2.2 日志文件管理命令</h4><ul>
<li>**<code>logrotate</code>**：日志轮换工具，用于自动管理日志文件，防止日志文件过大。它支持对日志文件进行压缩、删除和归档。</li>
</ul>
<p><strong>配置文件</strong>：</p>
<ul>
<li><code>/etc/logrotate.conf</code>：主配置文件，定义全局的日志轮换设置。</li>
<li><code>/etc/logrotate.d/</code>：包含每个服务的日志轮换配置。</li>
</ul>
<p><strong>示例配置</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">/var/log/syslog &#123;<br>    daily          <span class="hljs-comment"># 每天轮换日志</span><br>    rotate 7       <span class="hljs-comment"># 保留7个旧日志文件</span><br>    compress       <span class="hljs-comment"># 压缩旧的日志文件</span><br>    missingok      <span class="hljs-comment"># 如果日志文件丢失不报错</span><br>    notifempty     <span class="hljs-comment"># 如果日志为空，则不轮换</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>执行日志轮换：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">logrotate /etc/logrotate.conf  <span class="hljs-comment"># 手动执行日志轮换</span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="3-系统日志管理工具"><a href="#3-系统日志管理工具" class="headerlink" title="3. 系统日志管理工具"></a>3. <strong>系统日志管理工具</strong></h3><h4 id="3-1-rsyslog"><a href="#3-1-rsyslog" class="headerlink" title="3.1 rsyslog"></a>3.1 <strong>rsyslog</strong></h4><ul>
<li><code>rsyslog</code> 是 Linux 系统上最常用的日志管理服务，用于收集、存储和转发系统日志。它是 <code>syslog</code> 的增强版本，能够通过网络传输日志，还支持日志过滤和日志格式化等高级功能。</li>
</ul>
<p><strong>配置文件</strong>：</p>
<ul>
<li><code>/etc/rsyslog.conf</code>：主配置文件，用于定义日志的记录规则。</li>
<li><code>/etc/rsyslog.d/</code>：存放额外的配置文件。</li>
</ul>
<p><strong>日志格式说明</strong>：<br><code>rsyslog</code> 的配置文件中使用 <code>&lt;facility&gt;.&lt;level&gt;</code> 的形式来指定日志的类型和级别。</p>
<ul>
<li><p><strong>facility（设备）</strong>：表示日志的来源（系统组件），例如：</p>
<ul>
<li><code>auth</code>：认证系统日志</li>
<li><code>cron</code>：定时任务日志</li>
<li><code>daemon</code>：后台服务日志</li>
<li><code>kern</code>：内核日志</li>
</ul>
</li>
<li><p><strong>level（级别）</strong>：表示日志的严重程度，级别从低到高包括：</p>
<ul>
<li><code>debug</code>：调试信息</li>
<li><code>info</code>：普通信息</li>
<li><code>notice</code>：正常但重要的信息</li>
<li><code>warning</code>：警告</li>
<li><code>err</code>：错误</li>
<li><code>crit</code>：严重错误</li>
<li><code>alert</code>：需要立即修复的问题</li>
<li><code>emerg</code>：系统不可用</li>
</ul>
</li>
</ul>
<p><strong>示例</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">authpriv.*                        /var/log/secure  <span class="hljs-comment"># 记录所有与认证相关的日志到 secure 文件</span><br>*.*                               /var/log/messages  <span class="hljs-comment"># 记录所有日志到 messages 文件</span><br></code></pre></td></tr></table></figure>

<p>启动和重启 <code>rsyslog</code> 服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl restart rsyslog  <span class="hljs-comment"># 重启 rsyslog 服务</span><br></code></pre></td></tr></table></figure>

<h4 id="3-2-journalctl"><a href="#3-2-journalctl" class="headerlink" title="3.2 journalctl"></a>3.2 <strong>journalctl</strong></h4><ul>
<li><code>journalctl</code> 是 <code>systemd</code> 提供的日志管理工具，它能够查看由 <code>systemd</code> 管理的日志。<code>journalctl</code> 具有强大的过滤和格式化功能。</li>
</ul>
<p><strong>常用命令</strong>：</p>
<ul>
<li><p>查看系统日志：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">journalctl<br></code></pre></td></tr></table></figure>
</li>
<li><p>按时间范围查看日志：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">journalctl --since <span class="hljs-string">&quot;2024-10-20 10:00&quot;</span> --<span class="hljs-keyword">until</span> <span class="hljs-string">&quot;2024-10-20 12:00&quot;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>查看某个服务的日志：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">journalctl -u nginx<br></code></pre></td></tr></table></figure>
</li>
<li><p>查看系统启动日志：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">journalctl -b<br></code></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="4-日志管理示例"><a href="#4-日志管理示例" class="headerlink" title="4. 日志管理示例"></a>4. <strong>日志管理示例</strong></h3><h4 id="4-1-通过-journalctl-查看-SSH-登录相关日志"><a href="#4-1-通过-journalctl-查看-SSH-登录相关日志" class="headerlink" title="4.1 通过 journalctl 查看 SSH 登录相关日志"></a>4.1 通过 <code>journalctl</code> 查看 SSH 登录相关日志</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">journalctl -u sshd  <span class="hljs-comment"># 查看 SSH 服务日志</span><br></code></pre></td></tr></table></figure>

<h4 id="4-2-通过-grep-筛选系统日志中的错误信息"><a href="#4-2-通过-grep-筛选系统日志中的错误信息" class="headerlink" title="4.2 通过 grep 筛选系统日志中的错误信息"></a>4.2 通过 <code>grep</code> 筛选系统日志中的错误信息</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">grep <span class="hljs-string">&quot;error&quot;</span> /var/log/syslog<br></code></pre></td></tr></table></figure>

<h4 id="4-3-使用-logrotate-进行日志轮换"><a href="#4-3-使用-logrotate-进行日志轮换" class="headerlink" title="4.3 使用 logrotate 进行日志轮换"></a>4.3 使用 <code>logrotate</code> 进行日志轮换</h4><p><strong>配置文件</strong>：<br>编辑 <code>/etc/logrotate.d/nginx</code>，设置 Nginx 的日志轮换。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">/var/log/nginx/*.<span class="hljs-built_in">log</span> &#123;<br>    daily           <span class="hljs-comment"># 每日轮换</span><br>    missingok       <span class="hljs-comment"># 如果日志文件丢失不报错</span><br>    rotate 14       <span class="hljs-comment"># 保存14天的日志</span><br>    compress        <span class="hljs-comment"># 压缩旧日志</span><br>    delaycompress   <span class="hljs-comment"># 推迟一天压缩</span><br>    notifempty      <span class="hljs-comment"># 如果日志为空，则不轮换</span><br>    create 640 nginx adm  <span class="hljs-comment"># 新日志文件的权限</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>执行日志轮换：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> logrotate -f /etc/logrotate.conf  <span class="hljs-comment"># 强制执行日志轮换</span><br></code></pre></td></tr></table></figure>

<h4 id="4-4-查看内核消息日志"><a href="#4-4-查看内核消息日志" class="headerlink" title="4.4 查看内核消息日志"></a>4.4 查看内核消息日志</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dmesg | grep -i <span class="hljs-string">&quot;error&quot;</span>  <span class="hljs-comment"># 查看与内核相关的错误日志</span><br></code></pre></td></tr></table></figure>

<hr>
<h2 id="第十三章-备份与回复"><a href="#第十三章-备份与回复" class="headerlink" title="第十三章 备份与回复"></a>第十三章 备份与回复</h2><p>在 Linux 系统中，备份和恢复是至关重要的操作，尤其是对于保护数据、配置文件和整个系统。常见的备份和恢复工具有 <code>tar</code>、<code>rsync</code>、<code>dd</code> 等。以下是常用的备份与恢复指令及其使用细节，并结合示例进行说明。</p>
<hr>
<h3 id="1-常用的备份工具与指令"><a href="#1-常用的备份工具与指令" class="headerlink" title="1. 常用的备份工具与指令"></a>1. <strong>常用的备份工具与指令</strong></h3><h4 id="1-1-tar（归档与压缩工具）"><a href="#1-1-tar（归档与压缩工具）" class="headerlink" title="1.1 tar（归档与压缩工具）"></a>1.1 <strong><code>tar</code>（归档与压缩工具）</strong></h4><p><code>tar</code> 是 Linux 中常用的打包和备份工具，它不仅可以归档文件和目录，还可以进行压缩操作。使用 <code>tar</code> 命令可以创建 <code>.tar</code> 文件（只归档），或者 <code>.tar.gz</code>、<code>.tar.bz2</code> 文件（归档并压缩）。</p>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-c</code>：创建新的归档文件</li>
<li><code>-x</code>：解压归档文件</li>
<li><code>-z</code>：通过 <code>gzip</code> 压缩或解压</li>
<li><code>-j</code>：通过 <code>bzip2</code> 压缩或解压</li>
<li><code>-v</code>：显示详细信息</li>
<li><code>-f</code>：指定归档文件名</li>
<li><code>-p</code>：保留文件权限</li>
</ul>
<p><strong>示例 1：备份目录</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 创建一个名为 backup.tar.gz 的归档压缩文件，包含 /home/user 目录</span><br>tar -czvf backup.tar.gz /home/user<br></code></pre></td></tr></table></figure>

<p><strong>示例 2：恢复备份</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 解压并恢复 backup.tar.gz 到当前目录</span><br>tar -xzvf backup.tar.gz<br></code></pre></td></tr></table></figure>

<h4 id="1-2-rsync（远程同步工具）"><a href="#1-2-rsync（远程同步工具）" class="headerlink" title="1.2 rsync（远程同步工具）"></a>1.2 <strong><code>rsync</code>（远程同步工具）</strong></h4><p><code>rsync</code> 是一个快速且功能强大的文件同步和备份工具，支持本地备份和远程备份。它可以仅传输变更的部分，并保持文件权限、时间戳等元数据。</p>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-a</code>：归档模式，保留文件属性（递归、符号链接、权限等）</li>
<li><code>-v</code>：显示详细信息</li>
<li><code>-z</code>：在传输过程中压缩数据</li>
<li><code>-r</code>：递归传输目录及其子目录</li>
<li><code>--delete</code>：同步时删除目标目录中源中已删除的文件</li>
<li><code>--exclude</code>：排除某些文件或目录</li>
</ul>
<p><strong>示例 1：本地备份</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 将 /home/user 备份到 /backup 目录</span><br>rsync -av /home/user /backup<br></code></pre></td></tr></table></figure>

<p><strong>示例 2：远程备份</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 将 /home/user 目录备份到远程服务器</span><br>rsync -avz /home/user remote_user@remote_host:/remote/backup<br></code></pre></td></tr></table></figure>

<p><strong>示例 3：增量备份</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 同步时仅传输变更的文件</span><br>rsync -av --delete /home/user /backup<br></code></pre></td></tr></table></figure>

<h4 id="1-3-dd（磁盘克隆工具）"><a href="#1-3-dd（磁盘克隆工具）" class="headerlink" title="1.3 dd（磁盘克隆工具）"></a>1.3 <strong><code>dd</code>（磁盘克隆工具）</strong></h4><p><code>dd</code> 是用于低级别数据复制的工具，常用于备份和恢复整个硬盘或分区。它可以复制磁盘、分区，甚至是生成磁盘映像。</p>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>if</code>：输入文件（Input File），即源文件</li>
<li><code>of</code>：输出文件（Output File），即目标文件</li>
<li><code>bs</code>：块大小，定义读取和写入时的数据块大小</li>
<li><code>count</code>：指定读取的块数</li>
<li><code>status=progress</code>：显示进度条</li>
</ul>
<p><strong>示例 1：备份整个硬盘</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 将 /dev/sda 硬盘备份到 backup.img 文件中</span><br><span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/sda of=/backup/backup.img bs=4M status=progress<br></code></pre></td></tr></table></figure>

<p><strong>示例 2：恢复硬盘</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 将 backup.img 恢复到 /dev/sda 硬盘中</span><br><span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/backup/backup.img of=/dev/sda bs=4M status=progress<br></code></pre></td></tr></table></figure>

<p><strong>示例 3：备份指定分区</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 备份 /dev/sda1 分区到分区备份文件</span><br><span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/sda1 of=/backup/sda1_backup.img bs=4M status=progress<br></code></pre></td></tr></table></figure>

<h4 id="1-4-scp（安全拷贝工具）"><a href="#1-4-scp（安全拷贝工具）" class="headerlink" title="1.4 scp（安全拷贝工具）"></a>1.4 <strong><code>scp</code>（安全拷贝工具）</strong></h4><p><code>scp</code> 是基于 SSH 协议的文件传输工具，可以用于安全地将文件从本地传输到远程服务器，或从远程服务器传输到本地。</p>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-r</code>：递归复制整个目录</li>
<li><code>-v</code>：显示详细的复制过程</li>
<li><code>-P</code>：指定远程主机的 SSH 端口</li>
</ul>
<p><strong>示例 1：本地文件传输到远程</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 将 backup.tar.gz 传输到远程服务器的 /backup 目录</span><br>scp backup.tar.gz remote_user@remote_host:/backup<br></code></pre></td></tr></table></figure>

<p><strong>示例 2：远程文件传输到本地</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 将远程服务器上的 backup.tar.gz 文件传输到本地</span><br>scp remote_user@remote_host:/backup/backup.tar.gz .<br></code></pre></td></tr></table></figure>

<hr>
<h4 id="1-5-dump-工具"><a href="#1-5-dump-工具" class="headerlink" title="1.5 dump 工具"></a>1.5 <strong><code>dump</code> 工具</strong></h4><p><code>dump</code> 是一个用于备份文件系统的工具，它可以将文件系统的内容备份到指定的文件或设备中。它特别适用于对 Ext2、Ext3 和 Ext4 类型的文件系统进行备份，能够按需执行完整备份或增量备份。</p>
<p><strong>常用选项</strong></p>
<ul>
<li><code>-0</code> 到 <code>-9</code>：指定备份的级别。<code>0</code> 表示完整备份，<code>1-9</code> 表示增量备份。</li>
<li><code>-u</code>：更新 <code>/etc/dumpdates</code> 文件，记录备份时间。</li>
<li><code>-f</code>：指定备份文件名或目标设备（如磁带）。</li>
<li><code>-j</code>：使用 <code>bzip2</code> 进行压缩。</li>
<li><code>-z</code>：使用 <code>gzip</code> 进行压缩。</li>
<li><code>-v</code>：显示详细信息。</li>
</ul>
<p> <strong>示例</strong></p>
<p><strong>示例 1：完整备份文件系统</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 对 /dev/sda1 文件系统进行完整备份到 backup.dump 文件</span><br>dump -0uf /backup/backup.dump /dev/sda1<br></code></pre></td></tr></table></figure>

<p><strong>示例 2：增量备份文件系统</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 对 /dev/sda1 文件系统进行增量备份到 backup2.dump 文件</span><br>dump -1uf /backup/backup2.dump /dev/sda1<br></code></pre></td></tr></table></figure>

<p><strong>示例 3：使用 gzip 压缩备份</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 对 /dev/sda1 文件系统进行完整备份并使用 gzip 压缩</span><br>dump -0zvuf /backup/backup.dump.gz /dev/sda1<br></code></pre></td></tr></table></figure>

<p> <strong>备份级别</strong></p>
<p><code>dump</code> 的备份级别决定了备份的类型：</p>
<ul>
<li><strong>级别 0</strong>：完整备份，备份所有的数据。</li>
<li><strong>级别 1-9</strong>：增量备份，只备份自上次指定级别备份以来更改过的文件。备份级别越高，备份的数据越少。</li>
</ul>
<p>每次备份后，<code>dump</code> 会更新 <code>/etc/dumpdates</code> 文件，以记录上次备份的时间和备份级别。</p>
<hr>
<h4 id="1-6-restore-工具"><a href="#1-6-restore-工具" class="headerlink" title="1.6. restore 工具"></a>1.6. <strong><code>restore</code> 工具</strong></h4><p><code>restore</code> 是 <code>dump</code> 的配套工具，用于从 <code>dump</code> 创建的备份文件中恢复文件系统或文件。它可以还原整个文件系统、特定目录或单个文件，并支持交互式恢复。</p>
<p> <strong>常用选项</strong></p>
<ul>
<li><code>-r</code>：完全恢复文件系统。</li>
<li><code>-R</code>：增量恢复文件系统。</li>
<li><code>-t</code>：列出备份文件中的内容。</li>
<li><code>-i</code>：进入交互式模式，允许选择要恢复的文件或目录。</li>
<li><code>-f</code>：指定要从中恢复的备份文件。</li>
<li><code>-v</code>：显示详细信息。</li>
</ul>
<p><strong>示例</strong></p>
<p><strong>示例 1：完全恢复文件系统</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 从 backup.dump 完全恢复 /dev/sda1 文件系统</span><br>restore -rf /backup/backup.dump<br></code></pre></td></tr></table></figure>

<p><strong>示例 2：列出备份文件的内容</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 列出 backup.dump 中的文件和目录</span><br>restore -tf /backup/backup.dump<br></code></pre></td></tr></table></figure>

<p><strong>示例 3：交互式恢复</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 交互式从 backup.dump 中选择要恢复的文件或目录</span><br>restore -<span class="hljs-keyword">if</span> /backup/backup.dump<br></code></pre></td></tr></table></figure>
<p>在交互式模式下，用户可以浏览备份文件的内容并选择特定文件或目录进行恢复。</p>
<p><strong>示例 4：增量恢复</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 从增量备份 backup2.dump 中恢复</span><br>restore -rf /backup/backup2.dump<br></code></pre></td></tr></table></figure>

<p><strong>恢复特定文件或目录</strong></p>
<p>在交互式模式中，用户可以逐步浏览备份文件，并选择特定的文件或目录进行恢复。交互式命令包括：</p>
<ul>
<li><code>ls</code>：列出目录内容。</li>
<li><code>cd</code>：进入某个目录。</li>
<li><code>add</code>：选择恢复的文件或目录。</li>
<li><code>extract</code>：执行恢复操作。</li>
</ul>
<h3 id="2-文件系统备份与恢复"><a href="#2-文件系统备份与恢复" class="headerlink" title="2. 文件系统备份与恢复"></a>2. <strong>文件系统备份与恢复</strong></h3><h4 id="2-1-mount-和-umount"><a href="#2-1-mount-和-umount" class="headerlink" title="2.1 mount 和 umount"></a>2.1 <strong><code>mount</code> 和 <code>umount</code></strong></h4><p>对于文件系统的备份和恢复，通常会将某个分区或设备挂载到特定目录，然后使用工具（如 <code>rsync</code> 或 <code>tar</code>）备份该目录的内容。</p>
<p><strong>挂载设备示例</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 将 /dev/sdb1 分区挂载到 /mnt 目录</span><br>mount /dev/sdb1 /mnt<br></code></pre></td></tr></table></figure>

<p><strong>卸载设备示例</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 卸载 /mnt 目录</span><br>umount /mnt<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="3-备份策略"><a href="#3-备份策略" class="headerlink" title="3. 备份策略"></a>3. <strong>备份策略</strong></h3><h4 id="3-1-完全备份"><a href="#3-1-完全备份" class="headerlink" title="3.1 完全备份"></a>3.1 完全备份</h4><ul>
<li>完全备份是指备份所有的数据和文件。虽然简单，但完全备份通常比较耗时且占用大量存储空间。</li>
</ul>
<p><strong>示例</strong>：<br>使用 <code>tar</code> 进行完整备份：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tar -czvf full_backup.tar.gz /home/user<br></code></pre></td></tr></table></figure>

<h4 id="3-2-增量备份"><a href="#3-2-增量备份" class="headerlink" title="3.2 增量备份"></a>3.2 增量备份</h4><ul>
<li>增量备份是指只备份自上次备份以来发生变更的数据。相比完全备份，增量备份占用的空间和时间较少，但恢复时需要结合多个备份。</li>
</ul>
<p><strong>示例</strong>：<br>使用 <code>rsync</code> 实现增量备份：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rsync -av --delete /home/user /backup/incremental<br></code></pre></td></tr></table></figure>

<h4 id="3-3-差异备份"><a href="#3-3-差异备份" class="headerlink" title="3.3 差异备份"></a>3.3 差异备份</h4><ul>
<li>差异备份是指自上次完全备份以来所有变化的数据。恢复时比增量备份快，但比增量备份占用的存储空间大。</li>
</ul>
<hr>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" class="category-chain-item">计算机基础</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="print-no-link">#操作系统</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Linux(二)</div>
      <div>http://huahaudan.com/2024/10/22/linux/Linux2/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>huanhuadan</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年10月22日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/10/22/JavaWeb(SpringBoot+Vue)/JavaScript-Vue/" title="前端开发基础(二)">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">前端开发基础(二)</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/10/21/linux/Linux1/" title="Linux(一)">
                        <span class="hidden-mobile">Linux(一)</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
